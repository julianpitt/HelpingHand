var App={};window.App=App,function(e,t){e(document).ready(function(){for(key in t.Routes)"init"===key&&t.Routes[key](),e(key).length&&t.Routes[key]()})}(jQuery,window.App),function(e,t,s){"use strict";s.Routes={init:function(){this.smoothscroll()},".draggable":function(){t(".draggable").draggable({containment:"parent"})},".affix-scroll":function(){t(".affix-scroll").affix({offset:{top:t(e).height()+t(".affix-scroll").height()}})},smoothscroll:function(){t("main a").on("click",function(s){if(""!==this.hash){s.preventDefault();var o=this.hash;t("html, body").animate({scrollTop:t(o).offset().top},800,function(){e.location.hash=o})}})}}}(window,jQuery,App),function(){var e={markers:[],map:null,type:"water",openMarker:null,objects:[],init:function(){var e=this;$("#water").click(function(){e.type="water",e.requestData(),$("main").removeClass(),$("main").addClass("water"),$(".btn-filter input[type=checkbox]").prop("checked",!1),$(this).prop("checked",!0),$(".help-method").hide(),$(".help-method.water").show()}),$("#gas").click(function(){e.type="gas",e.requestData(),$("main").removeClass(),$("main").addClass("gas"),$(".btn-filter input[type=checkbox]").prop("checked",!1),$(this).prop("checked",!0),$(".help-method").hide(),$(".help-method.gas").show()}),$("#electricity").click(function(){e.type="electricity",e.requestData(),$("main").removeClass(),$("main").addClass("electricity"),$(".btn-filter input[type=checkbox]").prop("checked",!1),$(this).prop("checked",!0),$(".help-method").hide(),$(".help-method.electricity").show()}),$("#homelessness").click(function(){e.type="homelessness",e.requestData(),$("main").removeClass(),$("main").addClass("homelessness"),$(".btn-filter input[type=checkbox]").prop("checked",!1),$(this).prop("checked",!0),$(".help-method").hide(),$(".help-method.homelessness").show()}),this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:-28.8263257,lng:133.3605215},zoom:5,scrollwheel:!1,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},mapTypeControl:!1});var t=[{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{stylers:[{hue:"#00aaff"},{saturation:-100},{gamma:2.15},{lightness:12}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{visibility:"on"},{lightness:24}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:57}]}];this.map.setOptions({styles:t}),$("#water").click()},displayMarkers:function(){var e=this;this.removeMarkers();for(var t=0;t<e.objects.length;t++){var s=e.objects[t],o=new google.maps.LatLng(s.lat,s.lng),i=e.getCircle(o,s.value,s.colour);i.setMap(e.map),e.markers.push(i)}},getCircle:function(e,t,s){return new google.maps.Circle({center:e,radius:t,strokeColor:s,strokeOpacity:.8,strokeWeight:.2,fillColor:s,fillOpacity:.7})},removeMarkers:function(){for(var e=0;e<this.markers.length;e++)this.markers[e].setMap(null);this.markers=[]},mapClick:function(e){var e=e-1;null!==this.openInfoBox&&(this.openInfoBox.close(),this.openInfoBox=null),null!==this.openMarker&&(this.openMarker=null),google.maps.event.trigger(markers[e],"click"),this.map.setZoom(14),this.map.setCenter(this.markers[e].getPosition())},requestData:function(){var e="http://helpinghandapi.ddns.net:11000/",t=this.map.getZoom(),s=this.map.getCenter(),o=s.lat(),i=s.lng(),a=e+"usage/get/"+o+"/"+i+"/"+t+"/"+this.type,r=this;$.ajax({method:"GET",url:a,dataType:"JSON",crossOrigin:!0,success:function(e){return r.objects=[],"200"!=e.status?!0:(console.log("Rice review"),console.log(e.dataUsageItem[0].riceReview),e.dataUsageItem.forEach(function(e){e.colour=r.getColour(),r.objects.push(e)}),r.displayMarkers(e),void 0)}})},getColour:function(){switch(this.type){case"water":return"#2E4A82";case"gas":return"#804143";case"electricity":return"#fff748";case"homelessness":return"#408046"}}};window.App.MapController=e}(jQuery,window);