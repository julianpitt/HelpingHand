var App={};window.App=App,function(e,t){e(document).ready(function(){for(key in t.Routes)"init"===key&&t.Routes[key](),e(key).length&&t.Routes[key]()})}(jQuery,window.App),function(e,t,s){"use strict";s.Routes={init:function(){this.smoothscroll()},".draggable":function(){t(".draggable").draggable({containment:"parent"})},".affix-scroll":function(){t(".affix-scroll").affix({offset:{top:t(e).height()+t(".affix-scroll").height()}})},smoothscroll:function(){t("a").on("click",function(s){if(""!==this.hash){s.preventDefault();var o=this.hash;t("html, body").animate({scrollTop:t(o).offset().top},800,function(){e.location.hash=o})}})}}}(window,jQuery,App),function(){var e={markers:[],map:null,type:"water",openMarker:null,objects:[],init:function(){var e=this;$("#water").click(function(){e.type="water",e.requestData(),$("main").removeClass(),$("main").addClass("water"),$(".btn-filter input[type=checkbox]").prop("checked",!1),$(this).prop("checked",!0)}),$("#gas").click(function(){e.type="gas",e.requestData(),$("main").removeClass(),$("main").addClass("gas"),$(".btn-filter input[type=checkbox]").prop("checked",!1),$(this).prop("checked",!0)}),$("#electricity").click(function(){e.type="electricity",e.requestData(),$("main").removeClass(),$("main").addClass("electricity"),$(".btn-filter input[type=checkbox]").prop("checked",!1),$(this).prop("checked",!0)}),$("#homelessness").click(function(){e.type="homelessness",e.requestData(),$("main").removeClass(),$("main").addClass("homelessness"),$(".btn-filter input[type=checkbox]").prop("checked",!1),$(this).prop("checked",!0)}),this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:-28.8263257,lng:133.3605215},zoom:5,scrollwheel:!1,mapTypeControl:!1});var t=[{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{color:"#000000"},{lightness:13}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#144b53"},{lightness:14},{weight:1.4}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#176645"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#0c4152"},{lightness:5}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#176645"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#176645"},{lightness:25}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{visibility:"off"},{lightness:16}]},{featureType:"road.local",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{color:"#146474"}]},{featureType:"water",elementType:"all",stylers:[{color:"#021019"}]}];this.map.setOptions({styles:t}),$("#water").click()},displayMarkers:function(){var e=this;this.removeMarkers();for(var t=0;t<e.objects.length;t++){var s=e.objects[t],o=new google.maps.LatLng(s.lat,s.lng),r=e.getCircle(o,s.value,s.colour);r.setMap(e.map),e.markers.push(r)}},getCircle:function(e,t,s){return new google.maps.Circle({center:e,radius:8e4,strokeColor:s,strokeOpacity:.8,strokeWeight:.2,fillColor:s,fillOpacity:.4})},removeMarkers:function(){for(var e=0;e<this.markers.length;e++)this.markers[e].setMap(null);this.markers=[]},mapClick:function(e){var e=e-1;null!==this.openInfoBox&&(this.openInfoBox.close(),this.openInfoBox=null),null!==this.openMarker&&(this.openMarker=null),google.maps.event.trigger(markers[e],"click"),this.map.setZoom(14),this.map.setCenter(this.markers[e].getPosition())},requestData:function(){var e="http://helpinghandapi.ddns.net:11000/",t=this.map.getZoom(),s=this.map.getCenter(),o=s.lat(),r=s.lng(),l=e+"usage/get/"+o+"/"+r+"/"+t+"/"+this.type,a=this;console.log(l),$.ajax({method:"GET",url:l,dataType:"JSON",crossOrigin:!0,success:function(e){return console.log(e),a.objects=[],"200"!=e.status?!0:(e.dataUsageItem.forEach(function(e){e.colour="red",a.objects.push(e)}),a.displayMarkers(e),void 0)}})}};window.App.MapController=e}(jQuery,window);